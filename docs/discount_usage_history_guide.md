# ğŸ“Š HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng TÃ­nh NÄƒng Lá»‹ch Sá»­ MÃ£ Giáº£m GiÃ¡

## ğŸ¯ Tá»•ng Quan

TÃ­nh nÄƒng **Lá»‹ch sá»­ sá»­ dá»¥ng mÃ£ giáº£m giÃ¡** Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p vÃ o trang quáº£n lÃ½ discount vá»›i thiáº¿t káº¿ tab-based hiá»‡n Ä‘áº¡i, giÃºp báº¡n theo dÃµi chi tiáº¿t viá»‡c sá»­ dá»¥ng cÃ¡c mÃ£ giáº£m giÃ¡.

## ğŸš€ Truy Cáº­p

**URL:** `http://127.0.0.1:5500/public/admin/discounts.html`

Trang quáº£n lÃ½ cÃ³ 2 tabs chÃ­nh:
1. **Quáº£n lÃ½ mÃ£** - Táº¡o, sá»­a, xÃ³a mÃ£ giáº£m giÃ¡
2. **Lá»‹ch sá»­ sá»­ dá»¥ng** - Xem chi tiáº¿t lá»‹ch sá»­ sá»­ dá»¥ng mÃ£

## ğŸ“ˆ Thá»‘ng KÃª Tá»•ng Quan

Khi vÃ o tab "Lá»‹ch sá»­ sá»­ dá»¥ng", báº¡n sáº½ tháº¥y 4 tháº» thá»‘ng kÃª:

1. **Tá»•ng lÆ°á»£t dÃ¹ng** - Tá»•ng sá»‘ láº§n mÃ£ Ä‘Æ°á»£c sá»­ dá»¥ng
2. **Tá»•ng tiá»n giáº£m** - Tá»•ng sá»‘ tiá»n Ä‘Ã£ giáº£m cho khÃ¡ch hÃ ng
3. **GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng** - Tá»•ng giÃ¡ trá»‹ cÃ¡c Ä‘Æ¡n hÃ ng cÃ³ dÃ¹ng mÃ£
4. **KhÃ¡ch hÃ ng** - Sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng unique Ä‘Ã£ dÃ¹ng mÃ£

## ğŸ” TÃ¬m Kiáº¿m & Lá»c

### TÃ¬m kiáº¿m
Nháº­p vÃ o Ã´ tÃ¬m kiáº¿m Ä‘á»ƒ tÃ¬m theo:
- MÃ£ giáº£m giÃ¡ (VD: GIAM2K)
- Sá»‘ Ä‘iá»‡n thoáº¡i khÃ¡ch hÃ ng
- MÃ£ Ä‘Æ¡n hÃ ng
- TÃªn khÃ¡ch hÃ ng

### Bá»™ lá»c
- **Loáº¡i mÃ£**: Lá»c theo loáº¡i (Giáº£m cá»‘ Ä‘á»‹nh, Giáº£m %, Táº·ng quÃ , Freeship)
- **NgÃ y sá»­ dá»¥ng**: Lá»c theo ngÃ y cá»¥ thá»ƒ

## ğŸ“‹ Báº£ng Lá»‹ch Sá»­

Báº£ng hiá»ƒn thá»‹ cÃ¡c thÃ´ng tin:
- **Thá»i gian** - Thá»i Ä‘iá»ƒm sá»­ dá»¥ng mÃ£ (cÃ³ hiá»ƒn thá»‹ "X giá» trÆ°á»›c")
- **MÃ£ giáº£m giÃ¡** - MÃ£ Ä‘Æ°á»£c sá»­ dá»¥ng + loáº¡i mÃ£
- **ÄÆ¡n hÃ ng** - MÃ£ Ä‘Æ¡n hÃ ng (click Ä‘á»ƒ xem chi tiáº¿t Ä‘Æ¡n)
- **KhÃ¡ch hÃ ng** - TÃªn vÃ  SÄT
- **GiÃ¡ trá»‹ Ä‘Æ¡n** - Tá»•ng giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng
- **Giáº£m giÃ¡** - Sá»‘ tiá»n Ä‘Æ°á»£c giáº£m
- **QuÃ  táº·ng** - QuÃ  táº·ng kÃ¨m theo (náº¿u cÃ³)
- **Thao tÃ¡c** - NÃºt xem chi tiáº¿t

## ğŸ‘ï¸ Xem Chi Tiáº¿t

Click vÃ o icon máº¯t (ğŸ‘ï¸) Ä‘á»ƒ xem chi tiáº¿t Ä‘áº§y Ä‘á»§:
- ThÃ´ng tin mÃ£ giáº£m giÃ¡
- Chi tiáº¿t Ä‘Æ¡n hÃ ng (giÃ¡ trá»‹, giáº£m giÃ¡, thÃ nh tiá»n)
- ThÃ´ng tin khÃ¡ch hÃ ng
- Thá»i gian sá»­ dá»¥ng
- NÃºt "Xem Ä‘Æ¡n hÃ ng" Ä‘á»ƒ chuyá»ƒn sang trang orders

## ğŸ¨ Thiáº¿t Káº¿ UI

### MÃ u sáº¯c theo loáº¡i mÃ£:
- **Giáº£m cá»‘ Ä‘á»‹nh**: Xanh dÆ°Æ¡ng (Blue)
- **Giáº£m %**: TÃ­m (Purple)
- **Táº·ng quÃ **: Há»“ng (Pink)
- **Freeship**: Xanh lÃ¡ (Green)

### Hiá»‡u á»©ng:
- Fade-in animation khi load dá»¯ liá»‡u
- Hover effects trÃªn cÃ¡c hÃ ng
- Skeleton loading state
- Responsive design cho mobile

## ğŸ”§ API Endpoint

**Endpoint má»›i Ä‘Ã£ Ä‘Æ°á»£c thÃªm:**
```
GET https://ctv-api.yendev96.workers.dev?action=getDiscountUsageHistory
```

**Response:**
```json
{
  "success": true,
  "usageHistory": [
    {
      "id": 1,
      "discount_id": 1,
      "discount_code": "GIAM2K",
      "order_id": "DH1763721451168",
      "customer_name": "Nguyá»…n VÄƒn A",
      "customer_phone": "0901234567",
      "order_amount": 250000,
      "discount_amount": 2000,
      "gift_received": null,
      "used_at": "2025-11-21 10:08:29",
      "discount_title": "Giáº£m 2.000Ä‘",
      "discount_type": "fixed"
    }
  ]
}
```

## ğŸ“Š Database Schema

Dá»¯ liá»‡u Ä‘Æ°á»£c láº¥y tá»« báº£ng `discount_usage` vá»›i JOIN `discounts`:

```sql
SELECT 
    du.id,
    du.discount_id,
    du.discount_code,
    du.order_id,
    du.customer_name,
    du.customer_phone,
    du.order_amount,
    du.discount_amount,
    du.gift_received,
    du.used_at,
    d.title as discount_title,
    d.type as discount_type
FROM discount_usage du
LEFT JOIN discounts d ON du.discount_id = d.id
ORDER BY du.used_at DESC
LIMIT 1000
```

## âœ¨ TÃ­nh NÄƒng Ná»•i Báº­t

1. **Real-time Stats** - Thá»‘ng kÃª tá»± Ä‘á»™ng cáº­p nháº­t
2. **Smart Search** - TÃ¬m kiáº¿m thÃ´ng minh Ä‘a trÆ°á»ng
3. **Date Filter** - Lá»c theo ngÃ y cá»¥ thá»ƒ
4. **Quick View** - Xem nhanh chi tiáº¿t trong modal
5. **Direct Link** - Link trá»±c tiáº¿p Ä‘áº¿n Ä‘Æ¡n hÃ ng
6. **Time Ago** - Hiá»ƒn thá»‹ thá»i gian tÆ°Æ¡ng Ä‘á»‘i (2 giá» trÆ°á»›c, 1 ngÃ y trÆ°á»›c)
7. **Empty State** - Giao diá»‡n Ä‘áº¹p khi chÆ°a cÃ³ dá»¯ liá»‡u
8. **Loading State** - Skeleton loading chuyÃªn nghiá»‡p

## ğŸ¯ Use Cases

### 1. Kiá»ƒm tra hiá»‡u quáº£ mÃ£ giáº£m giÃ¡
- Xem mÃ£ nÃ o Ä‘Æ°á»£c dÃ¹ng nhiá»u nháº¥t
- Tá»•ng tiá»n Ä‘Ã£ giáº£m cho tá»«ng mÃ£
- Sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng sá»­ dá»¥ng

### 2. PhÃ¢n tÃ­ch hÃ nh vi khÃ¡ch hÃ ng
- KhÃ¡ch hÃ ng nÃ o dÃ¹ng mÃ£ nhiá»u láº§n
- GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng trung bÃ¬nh khi dÃ¹ng mÃ£
- Thá»i Ä‘iá»ƒm khÃ¡ch hay dÃ¹ng mÃ£

### 3. Audit & Tracking
- Theo dÃµi lá»‹ch sá»­ sá»­ dá»¥ng mÃ£
- Kiá»ƒm tra gian láº­n (náº¿u cÃ³)
- BÃ¡o cÃ¡o cho káº¿ toÃ¡n

### 4. Customer Support
- Tra cá»©u nhanh lá»‹ch sá»­ dÃ¹ng mÃ£ cá»§a khÃ¡ch
- XÃ¡c minh khÃ¡ch Ä‘Ã£ dÃ¹ng mÃ£ chÆ°a
- Há»— trá»£ giáº£i quyáº¿t khiáº¿u náº¡i

## ğŸš€ Cáº£i Tiáº¿n Trong TÆ°Æ¡ng Lai

- [ ] Export lá»‹ch sá»­ ra Excel/CSV
- [ ] Biá»ƒu Ä‘á»“ thá»‘ng kÃª theo thá»i gian
- [ ] So sÃ¡nh hiá»‡u quáº£ giá»¯a cÃ¡c mÃ£
- [ ] ThÃ´ng bÃ¡o khi mÃ£ Ä‘Æ°á»£c dÃ¹ng
- [ ] PhÃ¢n tÃ­ch ROI cá»§a tá»«ng mÃ£
- [ ] Gá»£i Ã½ tá»‘i Æ°u mÃ£ giáº£m giÃ¡

## ğŸ“ Ghi ChÃº

- Dá»¯ liá»‡u Ä‘Æ°á»£c giá»›i háº¡n 1000 records gáº§n nháº¥t
- Thá»i gian hiá»ƒn thá»‹ theo mÃºi giá» Viá»‡t Nam
- Tá»± Ä‘á»™ng refresh khi switch tab
- Há»— trá»£ Ä‘áº§y Ä‘á»§ trÃªn mobile

---

**PhÃ¡t triá»ƒn bá»Ÿi:** Kiro AI Assistant  
**NgÃ y cáº­p nháº­t:** 21/11/2025  
**Version:** 1.0.0
