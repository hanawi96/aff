<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi·ªè H√†ng - V√≤ng ƒê·∫ßu Tam</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="assets/css/form-validation.css">
    <link rel="stylesheet" href="assets/css/hierarchical-address-selector.css">
    <link rel="stylesheet" href="assets/css/list-address-selector.css">
</head>
<body>
    <!-- Header -->
    <header class="cart-header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="back-btn" aria-label="Quay l·∫°i">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                        <path fill-rule="evenodd" d="M7.28 7.72a.75.75 0 0 1 0 1.06l-2.47 2.47H21a.75.75 0 0 1 0 1.5H4.81l2.47 2.47a.75.75 0 1 1-1.06 1.06l-3.75-3.75a.75.75 0 0 1 0-1.06l3.75-3.75a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
                    </svg>
                </a>
                <div class="header-title-group">
                    <h1 class="cart-title">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="cart-icon-svg">
                            <path fill-rule="evenodd" d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a3 3 0 1 0 6 0v-.75a.75.75 0 0 1 1.5 0v.75a4.5 4.5 0 1 1-9 0v-.75a.75.75 0 0 1 1.5 0v.75Z" clip-rule="evenodd" />
                        </svg>
                        <span class="title-text">Gi·ªè h√†ng c·ªßa m·∫π</span>
                    </h1>
                    <span class="cart-count" id="cartCount">(0 s·∫£n ph·∫©m)</span>
                </div>
                <a href="index.html" class="continue-shopping">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                        <path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z" />
                        <path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z" />
                    </svg>
                    <span>Ti·∫øp t·ª•c mua</span>
                </a>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="cart-main">
        <div class="container">
            <div class="cart-layout">
                <!-- Left Column: Cart Items -->
                <div class="cart-items-section">
                    <!-- Skeleton Loading State -->
                    <div class="cart-skeleton" id="cartSkeleton">
                        <div class="skeleton-header">
                            <div class="skeleton-icon">
                                <svg class="cart-loading-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2.25 2.25a.75.75 0 000 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 00-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 000-1.5H5.378A2.25 2.25 0 017.5 15h11.218a.75.75 0 00.674-.421 60.358 60.358 0 002.96-7.228.75.75 0 00-.525-.965A60.864 60.864 0 005.68 4.509l-.232-.867A1.875 1.875 0 003.636 2.25H2.25zM3.75 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM16.5 20.25a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z" />
                                </svg>
                                <svg class="heart-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                                </svg>
                                <svg class="heart-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                                </svg>
                                <svg class="heart-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z" />
                                </svg>
                            </div>
                            <div class="skeleton-text">ƒêang chu·∫©n b·ªã gi·ªè h√†ng c·ªßa m·∫π...</div>
                        </div>
                        
                        <!-- Skeleton Cart Items -->
                        <div class="skeleton-items">
                            <div class="skeleton-item">
                                <div class="skeleton-image"></div>
                                <div class="skeleton-content">
                                    <div class="skeleton-line skeleton-title"></div>
                                    <div class="skeleton-line skeleton-subtitle"></div>
                                    <div class="skeleton-line skeleton-price"></div>
                                </div>
                            </div>
                            
                            <div class="skeleton-item">
                                <div class="skeleton-image"></div>
                                <div class="skeleton-content">
                                    <div class="skeleton-line skeleton-title"></div>
                                    <div class="skeleton-line skeleton-subtitle"></div>
                                    <div class="skeleton-line skeleton-price"></div>
                                </div>
                            </div>
                            
                            <div class="skeleton-item">
                                <div class="skeleton-image"></div>
                                <div class="skeleton-content">
                                    <div class="skeleton-line skeleton-title"></div>
                                    <div class="skeleton-line skeleton-subtitle"></div>
                                    <div class="skeleton-line skeleton-price"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Skeleton Sections -->
                        <div class="skeleton-section">
                            <div class="skeleton-line skeleton-section-title"></div>
                            <div class="skeleton-box"></div>
                        </div>
                        
                        <div class="skeleton-section">
                            <div class="skeleton-line skeleton-section-title"></div>
                            <div class="skeleton-box"></div>
                        </div>
                    </div>
                    
                    <!-- Empty State -->
                    <div class="empty-cart hidden" id="emptyCart">
                        <div class="empty-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 5rem; height: 5rem; display: inline-block;">
                                <path fill-rule="evenodd" d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a3 3 0 1 0 6 0v-.75a.75.75 0 0 1 1.5 0v.75a4.5 4.5 0 1 1-9 0v-.75a.75.75 0 0 1 1.5 0v.75Z" clip-rule="evenodd" />
                            </svg>
                            <div class="empty-sparkle">‚ú®</div>
                        </div>
                        <h2>Gi·ªè h√†ng ƒëang tr·ªëng</h2>
                        <p>H√£y th√™m nh·ªØng m√≥n qu√† y√™u th∆∞∆°ng cho b√© nh√© m·∫π!</p>
                        <a href="./index.html" class="btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block; vertical-align: middle;"><path d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" /></svg>
                            Kh√°m ph√° s·∫£n ph·∫©m
                        </a>
                    </div>

                    <!-- Cart Items -->
                    <div class="cart-items hidden" id="cartItems">
                        <!-- Items will be rendered here -->
                    </div>

                    <!-- Customer Information Section -->
                    <div class="customer-info-section hidden" id="customerInfoSection">
                        <div class="customer-info-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.5rem; height: 1.5rem; display: inline-block;">
                                <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                            </svg>
                            <h3>Th√¥ng tin ng∆∞·ªùi nh·∫≠n</h3>
                        </div>
                        
                        <!-- Phone -->
                        <div class="checkout-form-group">
                            <label class="checkout-form-label">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z" clip-rule="evenodd" />
                                </svg>
                                S·ªë ƒëi·ªán tho·∫°i<span class="required">*</span>
                            </label>
                            <input type="tel" class="checkout-form-input" id="cartPhone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" required>
                        </div>
                        
                        <!-- Name -->
                        <div class="checkout-form-group">
                            <label class="checkout-form-label">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                                </svg>
                                H·ªç v√† t√™n<span class="required">*</span>
                            </label>
                            <input type="text" class="checkout-form-input" id="cartName" placeholder="Nh·∫≠p h·ªç v√† t√™n" required>
                        </div>
                        
                        <!-- Address Selector - Click to open modal -->
                        <div class="checkout-form-group">
                            <label class="checkout-form-label">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                                </svg>
                                ƒê·ªãa ch·ªâ giao h√†ng<span class="required">*</span>
                            </label>
                            
                            <!-- Address Display Button -->
                            <button type="button" class="address-select-btn" id="openAddressModalBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.25rem; height: 1.25rem;">
                                    <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                                </svg>
                                <span id="selectedAddressText">Ch·ªçn ƒë·ªãa ch·ªâ giao h√†ng</span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1rem; height: 1rem; margin-left: auto;">
                                    <path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Order Note Section -->
                    <div class="order-note-section hidden" id="orderNoteSection">
                        <div class="order-note-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.3rem; height: 1.3rem; display: inline-block;">
                                <path fill-rule="evenodd" d="M5.337 21.718a6.707 6.707 0 0 1-.533-.074.75.75 0 0 1-.44-1.223 3.73 3.73 0 0 0 .814-1.686c.023-.115-.022-.317-.254-.543C3.274 16.587 2.25 14.41 2.25 12c0-5.03 4.428-9 9.75-9s9.75 3.97 9.75 9c0 5.03-4.428 9-9.75 9-.833 0-1.643-.097-2.417-.279a6.721 6.721 0 0 1-4.246.997Z" clip-rule="evenodd" />
                            </svg>
                            <h3>L∆∞u √Ω cho ƒë∆°n h√†ng</h3>
                        </div>
                        <div class="order-note-content">
                            <textarea 
                                id="orderNote" 
                                class="order-note-textarea"
                                placeholder="Nh·∫≠p l∆∞u √Ω cho shop (v√≠ d·ª•: giao gi·ªù h√†nh ch√≠nh, g·ªçi tr∆∞·ªõc khi giao...)"
                                maxlength="500"
                                rows="3"
                            ></textarea>
                            <div class="order-note-footer">
                                <span class="char-count" id="orderNoteCharCount">0/500</span>
                            </div>
                        </div>
                    </div>

                    <!-- Bundle Offer Section -->
                    <div class="bundle-offer-section hidden" id="bundleOfferSection">
                        <div class="bundle-offer-badge">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="gift-icon" style="width: 1.4rem; height: 1.4rem; display: inline-block;">
                                <path d="M9.375 3a1.875 1.875 0 0 0 0 3.75h1.875v4.5H3.375A1.875 1.875 0 0 1 1.5 9.375v-.75c0-1.036.84-1.875 1.875-1.875h3.193A3.375 3.375 0 0 1 12 2.753a3.375 3.375 0 0 1 5.432 3.997h3.943c1.035 0 1.875.84 1.875 1.875v.75c0 1.036-.84 1.875-1.875 1.875H12.75v-4.5h1.875a1.875 1.875 0 1 0-1.875-1.875V6.75h-1.5V4.875C11.25 3.839 10.41 3 9.375 3ZM11.25 12.75H3v6.75a2.25 2.25 0 0 0 2.25 2.25h6v-9ZM12.75 12.75v9h6.75a2.25 2.25 0 0 0 2.25-2.25v-6.75h-9Z" />
                            </svg>
                            <span>∆Øu ƒë√£i ƒë·∫∑c bi·ªát</span>
                            <span class="badge-separator">|</span>
                            
                            <span id="bundleCountdownText">--:--:--</span>
                        </div>
                        
                        <div class="bundle-offer-header">
                            <div class="bundle-offer-title">
                                <h3>Mua k√®m ƒë·ªÉ <span class="free-shipping-highlight"></span>MI·ªÑN PH√ç V·∫¨N CHUY·ªÇN</span></h3>
                                <p>Th√™m b√≥ d√¢u t·∫±m ƒë·ªÉ gi∆∞·ªùng - Gi√∫p b·∫£o v·ªá b√© to√†n di·ªán h∆°n</p>
                            </div>
                            <div class="bundle-offer-benefit">
                                <div class="benefit-tag">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                        <path d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 1 1 6 0h3a.75.75 0 0 0 .75-.75V15Z" />
                                        <path d="M8.25 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM15.75 6.75a.75.75 0 0 0-.75.75v11.25c0 .087.015.17.042.248a3 3 0 0 1 5.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 0 0-3.732-10.104 1.837 1.837 0 0 0-1.47-.725H15.75Z" />
                                        <path d="M19.5 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z" />
                                    </svg>
                                    <span>FREE SHIP</span>
                                </div>
                                <div class="benefit-text">khi mua k√®m</div>
                            </div>
                        </div>

                        <div class="bundle-products" id="bundleProducts">
                            <!-- Bundle products will be rendered here -->
                        </div>

                        <div class="bundle-offer-footer">
                            <div class="bundle-stats">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="M8.25 6.75a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0ZM15.75 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM2.25 9.75a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM6.31 15.117A6.745 6.745 0 0 1 12 12a6.745 6.745 0 0 1 6.709 7.498.75.75 0 0 1-.372.568A12.696 12.696 0 0 1 12 21.75c-2.305 0-4.47-.612-6.337-1.684a.75.75 0 0 1-.372-.568 6.787 6.787 0 0 1 1.019-4.38Z" clip-rule="evenodd" />
                                    <path d="M5.082 14.254a8.287 8.287 0 0 0-1.308 5.135 9.687 9.687 0 0 1-1.764-.44l-.115-.04a.563.563 0 0 1-.373-.487l-.01-.121a3.75 3.75 0 0 1 3.57-4.047ZM20.226 19.389a8.287 8.287 0 0 0-1.308-5.135 3.75 3.75 0 0 1 3.57 4.047l-.01.121a.563.563 0 0 1-.373.486l-.115.04c-.567.2-1.156.349-1.764.441Z" />
                                </svg>
                                <span><strong>847 m·∫π</strong> ƒë√£ mua k√®m tu·∫ßn n√†y</span>
                            </div>
                            
                        </div>
                    </div>

                    <!-- Discount Code -->
                    <div class="discount-section hidden" id="discountSection">
                        <div class="discount-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.5rem; height: 1.5rem; display: inline-block;">
                                <path d="M9.375 3a1.875 1.875 0 0 0 0 3.75h1.875v4.5H3.375A1.875 1.875 0 0 1 1.5 9.375v-.75c0-1.036.84-1.875 1.875-1.875h3.193A3.375 3.375 0 0 1 12 2.753a3.375 3.375 0 0 1 5.432 3.997h3.943c1.035 0 1.875.84 1.875 1.875v.75c0 1.036-.84 1.875-1.875 1.875H12.75v-4.5h1.875a1.875 1.875 0 1 0-1.875-1.875V6.75h-1.5V4.875C11.25 3.839 10.41 3 9.375 3ZM11.25 12.75H3v6.75a2.25 2.25 0 0 0 2.25 2.25h6v-9ZM12.75 12.75v9h6.75a2.25 2.25 0 0 0 2.25-2.25v-6.75h-9Z" />
                            </svg>
                            <h3>M√£ gi·∫£m gi√°</h3>
                        </div>
                        <div class="discount-input-group">
                            <div class="discount-input-wrapper">
                                <input 
                                    type="text" 
                                    id="discountCode" 
                                    placeholder="Nh·∫≠p m√£ gi·∫£m gi√° c·ªßa b·∫°n"
                                    maxlength="20"
                                >
                                <svg class="discount-check-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                    <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <button class="btn-apply" id="applyDiscountBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1rem; height: 1rem; display: inline-block; vertical-align: middle;">
                                    <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z" clip-rule="evenodd" />
                                </svg>
                                √Åp d·ª•ng
                            </button>
                        </div>
                        <div class="discount-result" id="discountResult"></div>
                        <div class="available-codes">
                            <p class="codes-title">üíù M√£ kh·∫£ d·ª•ng cho m·∫π:</p>
                            <div class="code-list" id="availableCodes"></div>
                            <button class="btn-view-all-codes hidden" id="viewAllCodesBtn">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                                    <path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z" clip-rule="evenodd" />
                                </svg>
                                Xem t·∫•t c·∫£ m√£ gi·∫£m gi√°
                            </button>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="payment-section hidden" id="paymentSection">
                        <div class="payment-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.3rem; height: 1.3rem; display: inline-block;">
                                <path d="M4.5 3.75a3 3 0 0 0-3 3v.75h21v-.75a3 3 0 0 0-3-3h-15Z" />
                                <path fill-rule="evenodd" d="M22.5 9.75h-21v7.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-7.5Zm-18 3.75a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z" clip-rule="evenodd" />
                            </svg>
                            <h3>Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
                        </div>
                        <div class="payment-methods">
                            <div class="payment-method-item active" data-method="cod" onclick="cartPayment.selectPaymentMethod('cod')">
                                <input type="radio" name="payment-method" class="payment-method-radio" checked>
                                <div class="payment-method-info">
                                    <div class="payment-method-name">Thanh to√°n khi nh·∫≠n h√†ng</div>
                                    <div class="payment-method-desc">Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi nh·∫≠n h√†ng</div>
                                </div>
                            </div>
                            <div class="payment-method-item" data-method="bank" onclick="cartPayment.selectPaymentMethod('bank')">
                                <input type="radio" name="payment-method" class="payment-method-radio">
                                <div class="payment-method-info">
                                    <div class="payment-method-name">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</div>
                                    <div class="payment-method-desc">Chuy·ªÉn kho·∫£n tr∆∞·ªõc, giao h√†ng sau</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bank Transfer Info (Hidden by default) -->
                        <div class="bank-transfer-info hidden" id="bankTransferInfo">
                            <div class="bank-info-header">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path d="M11.584 2.376a.75.75 0 0 1 .832 0l9 6a.75.75 0 1 1-.832 1.248L12 3.901 3.416 9.624a.75.75 0 0 1-.832-1.248l9-6Z" />
                                    <path fill-rule="evenodd" d="M20.25 10.332v9.918H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h.75v-9.918a.75.75 0 0 1 .634-.74A49.109 49.109 0 0 1 12 9c2.59 0 5.134.202 7.616.592a.75.75 0 0 1 .634.74Zm-7.5 2.418a.75.75 0 0 0-1.5 0v6.75a.75.75 0 0 0 1.5 0v-6.75Zm3-.75a.75.75 0 0 1 .75.75v6.75a.75.75 0 0 1-1.5 0v-6.75a.75.75 0 0 1 .75-.75ZM9 12.75a.75.75 0 0 0-1.5 0v6.75a.75.75 0 0 0 1.5 0v-6.75Z" clip-rule="evenodd" />
                                    <path d="M12 7.875a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z" />
                                </svg>
                                Th√¥ng tin chuy·ªÉn kho·∫£n
                            </div>
                            <div class="bank-info-content">
                                <div class="bank-info-row">
                                    <span class="bank-info-label">S·ªë ti·ªÅn c·∫ßn chuy·ªÉn:</span>
                                    <span class="bank-info-value highlight" id="bankTransferAmount">0ƒë</span>
                                </div>
                                <div class="bank-info-divider"></div>
                                <div class="bank-info-row">
                                    <span class="bank-info-label">Ng∆∞·ªùi nh·∫≠n:</span>
                                    <span class="bank-info-value">L√ä TH·ªä ANH</span>
                                </div>
                                <div class="bank-info-row">
                                    <span class="bank-info-label">Ng√¢n h√†ng:</span>
                                    <span class="bank-info-value bank-name">Techcombank</span>
                                </div>
                                <div class="bank-info-row">
                                    <span class="bank-info-label">S·ªë t√†i kho·∫£n:</span>
                                    <span class="bank-info-value">
                                        <span id="bankAccountNumber">6968969012</span>
                                        <button class="copy-btn" onclick="cartPayment.copyBankInfo('6968969012')" title="Sao ch√©p">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                                <path fill-rule="evenodd" d="M17.663 3.118c.225.015.45.032.673.05C19.876 3.298 21 4.604 21 6.109v9.642a3 3 0 0 1-3 3V16.5c0-5.922-4.576-10.775-10.384-11.217.324-1.132 1.3-2.01 2.548-2.114.224-.019.448-.036.673-.051A3 3 0 0 1 13.5 1.5H15a3 3 0 0 1 2.663 1.618ZM12 4.5A1.5 1.5 0 0 1 13.5 3H15a1.5 1.5 0 0 1 1.5 1.5H12Z" clip-rule="evenodd" />
                                                <path d="M3 8.625c0-1.036.84-1.875 1.875-1.875h.375A3.75 3.75 0 0 1 9 10.5v1.875c0 1.036.84 1.875 1.875 1.875h1.875A3.75 3.75 0 0 1 16.5 18v2.625c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625v-12Z" />
                                                <path d="M10.5 10.5a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963 5.23 5.23 0 0 0-3.434-1.279h-1.875a.375.375 0 0 1-.375-.375V10.5Z" />
                                            </svg>
                                        </button>
                                    </span>
                                </div>
                                <div class="bank-info-row">
                                    <span class="bank-info-label">N·ªôi dung CK:</span>
                                    <span class="bank-info-value">
                                        <span id="bankTransferNote">0386190596</span>
                                        <button class="copy-btn" onclick="cartPayment.copyBankInfo('0386190596')" title="Sao ch√©p">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                                <path fill-rule="evenodd" d="M17.663 3.118c.225.015.45.032.673.05C19.876 3.298 21 4.604 21 6.109v9.642a3 3 0 0 1-3 3V16.5c0-5.922-4.576-10.775-10.384-11.217.324-1.132 1.3-2.01 2.548-2.114.224-.019.448-.036.673-.051A3 3 0 0 1 13.5 1.5H15a3 3 0 0 1 2.663 1.618ZM12 4.5A1.5 1.5 0 0 1 13.5 3H15a1.5 1.5 0 0 1 1.5 1.5H12Z" clip-rule="evenodd" />
                                                <path d="M3 8.625c0-1.036.84-1.875 1.875-1.875h.375A3.75 3.75 0 0 1 9 10.5v1.875c0 1.036.84 1.875 1.875 1.875h1.875A3.75 3.75 0 0 1 16.5 18v2.625c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625v-12Z" />
                                                <path d="M10.5 10.5a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963 5.23 5.23 0 0 0-3.434-1.279h-1.875a.375.375 0 0 1-.375-.375V10.5Z" />
                                            </svg>
                                        </button>
                                    </span>
                                </div>
                            </div>
                           
                            <button class="bank-confirm-btn" id="cartBankConfirmBtn" onclick="cartPayment.confirmBankTransfer()">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1rem; height: 1rem; display: inline-block; vertical-align: middle;">
                                    <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
                                </svg>
                                X√°c nh·∫≠n ƒë√£ chuy·ªÉn kho·∫£n
                            </button>
                            <div class="bank-confirm-error hidden" id="cartBankConfirmError">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 0.875rem; height: 0.875rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" />
                                </svg>
                                Vui l√≤ng b·∫•m x√°c nh·∫≠n ƒë√£ chuy·ªÉn kho·∫£n
                            </div>
                        </div>
                    </div>

                    <!-- Recommended Products -->
                    <div class="recommended-section hidden" id="recommendedSection">
                        <h3>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                <path d="M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z" />
                                <path fill-rule="evenodd" d="M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z" clip-rule="evenodd" />
                            </svg>
                            Kh√°ch h√†ng c≈©ng mua
                        </h3>
                        <div class="recommended-products" id="recommendedProducts"></div>
                    </div>
                </div>

                <!-- Right Column: Summary -->
                <div class="cart-summary-section">
                    <!-- Skeleton Summary -->
                    <div class="cart-summary-skeleton" id="cartSummarySkeleton">
                        <div class="skeleton-summary-header">
                            <div class="skeleton-line skeleton-summary-title"></div>
                        </div>
                        <div class="skeleton-summary-rows">
                            <div class="skeleton-line skeleton-summary-row"></div>
                            <div class="skeleton-line skeleton-summary-row"></div>
                            <div class="skeleton-line skeleton-summary-row"></div>
                        </div>
                        <div class="skeleton-summary-divider"></div>
                        <div class="skeleton-line skeleton-summary-total"></div>
                        <div class="skeleton-summary-button"></div>
                    </div>
                    
                    <div class="cart-summary hidden" id="cartSummary">
                        <div class="summary-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.3rem; height: 1.3rem; display: inline-block;">
                                <path fill-rule="evenodd" d="M12 1.5c-1.921 0-3.816.111-5.68.327-1.497.174-2.57 1.46-2.57 2.93V21.75a.75.75 0 0 0 1.029.696l3.471-1.388 3.472 1.388a.75.75 0 0 0 .556 0l3.472-1.388 3.471 1.388a.75.75 0 0 0 1.029-.696V4.757c0-1.47-1.073-2.756-2.57-2.93A49.255 49.255 0 0 0 12 1.5Zm3.53 7.28a.75.75 0 0 0-1.06-1.06l-6 6a.75.75 0 1 0 1.06 1.06l6-6ZM8.625 9a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm5.625 3.375a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25Z" clip-rule="evenodd" />
                            </svg>
                            <h3>T√≥m t·∫Øt ƒë∆°n h√†ng</h3>
                        </div>
                        
                        <div class="summary-rows">
                            <div class="summary-row">
                                <span>T·∫°m t√≠nh <span class="item-count" id="summaryItemCount">(0 sp)</span>:</span>
                                <span class="amount" id="subtotal">0ƒë</span>
                            </div>
                            
                            <div class="summary-row">
                                <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                                <span class="amount" id="shippingFee">30.000ƒë</span>
                            </div>
                            
                            <div class="summary-row discount-row hidden" id="freeshipRow">
                                <span>Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn <span class="discount-code-label" id="freeshipLabel"></span>:</span>
                                <span class="amount discount-amount" id="freeshipAmount">-0ƒë</span>
                            </div>
                            
                            <div class="summary-row discount-row hidden" id="discountRow">
                                <span>Gi·∫£m gi√° <span class="discount-code-label" id="discountCodeLabel"></span>:</span>
                                <span class="amount discount-amount" id="discountAmount">-0ƒë</span>
                            </div>
                        </div>
                        
                        <div class="summary-divider"></div>
                        
                        <div class="summary-total">
                            <span>T·ªïng c·ªông:</span>
                            <span class="total-amount" id="totalAmount">0ƒë</span>
                        </div>
                        
                        <!-- Payment Status Row (for bank transfer) -->
                        <div class="summary-row payment-row hidden" id="cartPaymentRow">
                            <span class="payment-label">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1rem; height: 1rem; display: inline-block;">
                                    <path d="M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z" />
                                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z" clip-rule="evenodd" />
                                </svg>
                                Thanh to√°n khi nh·∫≠n h√†ng
                            </span>
                            <span class="amount payment-value" id="cartPaymentAmount">0ƒë</span>
                        </div>
                        
                        <div class="checkout-submit-section-cart">
                            <div class="checkout-guarantee-badge">
                                <div class="guarantee-text">
                                    <span class="guarantee-main">Nh·∫≠n h√†ng ki·ªÉm tra tho·∫£i m√°i</span>
                                    <span class="guarantee-sub">Kh√¥ng ∆∞ng √Ω? Ho√†n ti·ªÅn 100%</span>
                                </div>
                            </div>
                            <div class="checkout-total-box-cart">
                                <div class="total-label-main-cart">ƒê·∫∂T H√ÄNG NGAY</div>
                                <div class="total-amount-cart" id="checkoutTotal">0ƒë</div>
                            </div>
                            <button class="checkout-submit-btn-cart" id="checkoutBtn">
                                ƒê·∫∂T H√ÄNG
                            </button>
                        </div>
                        
                        <div class="trust-badges">
                            <div class="badge">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path d="M10.5 1.875a1.125 1.125 0 0 1 2.25 0v8.219c.517.162 1.02.382 1.5.659V3.375a1.125 1.125 0 0 1 2.25 0v10.937a4.505 4.505 0 0 0-3.25 2.373 8.963 8.963 0 0 1 4-.935A.75.75 0 0 0 18 15v-2.266a3.368 3.368 0 0 1 .988-2.37 1.125 1.125 0 0 1 1.591 1.59 1.118 1.118 0 0 0-.329.79v3.006h-.005a6 6 0 0 1-1.752 4.007l-1.736 1.736a6 6 0 0 1-4.242 1.757H10.5a7.5 7.5 0 0 1-7.5-7.5V6.375a1.125 1.125 0 0 1 2.25 0v5.519c.46-.452.965-.832 1.5-1.141V3.375a1.125 1.125 0 0 1 2.25 0v6.526c.495-.1.997-.151 1.5-.151V1.875Z" />
                                </svg>
                                <span>100% Th·ªß c√¥ng</span>
                            </div>
                            <div class="badge">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 1 1 6 0h3a.75.75 0 0 0 .75-.75V15Z" />
                                    <path d="M8.25 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM15.75 6.75a.75.75 0 0 0-.75.75v11.25c0 .087.015.17.042.248a3 3 0 0 1 5.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 0 0-3.732-10.104 1.837 1.837 0 0 0-1.47-.725H15.75Z" />
                                    <path d="M19.5 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z" />
                                </svg>
                                <span>Giao h√†ng to√†n qu·ªëc</span>
                            </div>
                            <div class="badge">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                    <path fill-rule="evenodd" d="M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
                                </svg>
                                <span>ƒê·ªïi tr·∫£ trong 7 ng√†y</span>
                            </div>
                        </div>
                    </div>

                    <!-- Free Shipping Progress -->
                    <div class="shipping-progress hidden" id="shippingProgress">
                        <div class="progress-header">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                                <path d="M3.375 4.5C2.339 4.5 1.5 5.34 1.5 6.375V13.5h12V6.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM13.5 15h-12v2.625c0 1.035.84 1.875 1.875 1.875h.375a3 3 0 1 1 6 0h3a.75.75 0 0 0 .75-.75V15Z" />
                                <path d="M8.25 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0ZM15.75 6.75a.75.75 0 0 0-.75.75v11.25c0 .087.015.17.042.248a3 3 0 0 1 5.958.464c.853-.175 1.522-.935 1.464-1.883a18.659 18.659 0 0 0-3.732-10.104 1.837 1.837 0 0 0-1.47-.725H15.75Z" />
                                <path d="M19.5 19.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z" />
                            </svg>
                            <span id="shippingMessage">Th√™m 230.000ƒë ƒë·ªÉ FREE SHIP</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Confirm Dialog -->
    <div class="modal-overlay hidden" id="confirmModal">
        <div class="modal-content">
            <div class="modal-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.5rem; height: 1.5rem; display: inline-block;"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" /></svg>
                <h3>X√°c nh·∫≠n</h3>
            </div>
            <div class="modal-body" id="confirmMessage"></div>
            <div class="modal-footer">
                <button class="btn-cancel" id="confirmCancel">H·ªßy</button>
                <button class="btn-confirm" id="confirmOk">X√°c nh·∫≠n</button>
            </div>
        </div>
    </div>

    <!-- All Discounts Modal -->
    <div class="modal-overlay hidden" id="allDiscountsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.5rem; height: 1.5rem; display: inline-block;">
                    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                    <path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z" clip-rule="evenodd" />
                </svg>
                <h3>T·∫•t c·∫£ m√£ gi·∫£m gi√°</h3>
                <button class="modal-close-btn" id="closeAllDiscountsModal">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem; display: inline-block;">
                        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
            <div class="modal-body modal-body-scroll">
                <div id="allDiscountsList"></div>
            </div>
        </div>
    </div>

    <!-- Contact Buttons -->
    <div id="contactButtonsContainer"></div>

    <link rel="stylesheet" href="assets/css/faq-modal.css">
    <script type="module" src="cart.js"></script>
    <script src="assets/js/faq-modal.js"></script>
    <script type="module">
        // Import and initialize list address selector for cart page
        import { ListAddressSelector } from './assets/js/components/list-address-selector.js';
        
        // Setup Address Modal - DEFINE FIRST before using
        function setupAddressModal() {
            const modal = document.getElementById('addressModal');
            const modalBody = modal.querySelector('.address-modal-body');
            const openBtn = document.getElementById('openAddressModalBtn');
            const closeBtn = document.getElementById('closeAddressModalBtn');
            const confirmBtn = document.getElementById('confirmAddressBtn');
            const selectedText = document.getElementById('selectedAddressText');
            
            if (!modal || !openBtn || !closeBtn || !confirmBtn) {
                console.error('‚ùå Modal elements not found');
                return;
            }
            
            // Open modal
            openBtn.addEventListener('click', () => {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                document.body.classList.add('modal-open');
            });
            
            // Close modal
            const closeModal = () => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
                document.body.classList.remove('modal-open');
            };
            
            closeBtn.addEventListener('click', closeModal);
            
            // Click outside to close
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Confirm address
            confirmBtn.addEventListener('click', () => {
                const addressData = window.cartAddressSelector.getAddress();
                
                // Validate
                if (!addressData.isComplete) {
                    alert('Vui l√≤ng ch·ªçn ƒë·∫ßy ƒë·ªß ƒë·ªãa ch·ªâ v√† nh·∫≠p ƒë·ªãa ch·ªâ c·ª• th·ªÉ');
                    return;
                }
                
                // Update button text
                selectedText.textContent = addressData.fullAddress;
                selectedText.classList.add('has-address');
                
                // Close modal
                closeModal();
                
                console.log('‚úÖ Address selected:', addressData);
            });
            
            console.log('‚úÖ Address modal setup complete');
        }
        
        // Wait for DOM and cart to be ready
        window.addEventListener('cartInitialized', async () => {
            // Initialize address selector in MODAL instead of inline
            const modalContainer = document.getElementById('modalAddressSelectorContainer');
            
            if (modalContainer && !window.cartAddressSelector) {
                window.cartAddressSelector = new ListAddressSelector('modalAddressSelectorContainer');
                await window.cartAddressSelector.init();
                console.log('‚úÖ List address selector initialized in modal');
            }
            
            // Setup modal controls
            setupAddressModal();
        });
    </script>
    <script>
        // Load contact buttons
        fetch('partials/contact-buttons.html')
            .then(response => response.text())
            .then(html => {
                const container = document.getElementById('contactButtonsContainer');
                container.innerHTML = html;
                console.log('Contact buttons loaded and scripts executed');
            })
            .catch(error => console.error('Error loading contact buttons:', error));
    </script>
    
    <!-- Address Selection Modal -->
    <div class="address-modal hidden" id="addressModal">
        <div class="address-modal-content">
            <div class="address-modal-header">
                <h3>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.25rem; height: 1.25rem;">
                        <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd" />
                    </svg>
                    Ch·ªçn ƒë·ªãa ch·ªâ giao h√†ng
                </h3>
                <button class="address-modal-close" id="closeAddressModalBtn" aria-label="ƒê√≥ng">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
            <div class="address-modal-body">
                <div id="modalAddressSelectorContainer"></div>
            </div>
            <div class="address-modal-footer">
                <button class="address-confirm-btn" id="confirmAddressBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 1.125rem; height: 1.125rem;">
                        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
                    </svg>
                    X√°c nh·∫≠n ƒë·ªãa ch·ªâ
                </button>
            </div>
        </div>
    </div>
    
</body>
</html>
